# 实现任务列表

- [x] 1. 扩展 GraphicsEngine 支持图形对象管理
  - 在 GraphicsEngine.h 中添加图形对象存储结构（vector 存储已绘制的图形）
  - 添加选中图形的索引和状态变量
  - 扩展 DrawMode 枚举添加新模式（多边形、选择、变换、裁剪）
  - 在 resource.h 添加新菜单 ID 定义
  - _需求: 1.1, 2.1, 11.1_

- [x] 2. 添加菜单和基本 UI
  - 在 WM_CREATE 中创建"变换"和"裁剪"菜单
  - 添加多边形绘制、选择、平移、缩放、旋转菜单项
  - 添加四种裁剪算法菜单项
  - 在 WM_COMMAND 中添加消息处理调用 SetMode
  - 更新"关于"对话框添加实验三信息
  - _需求: 11.1, 11.2, 11.3_

- [x] 3. 实现多边形绘制功能
  - 添加 MODE_POLYGON 模式处理
  - 在 OnLButtonDown 中收集多边形顶点
  - 在 OnRButtonDown 中完成多边形并保存到图形列表
  - 在 OnMouseMove 中显示绘制预览
  - 添加 DrawPolygon 方法绘制闭合多边形
  - _需求: 1.1, 1.2, 1.3, 1.4, 1.5, 1.7_

- [x] 4. 实现图形选择功能
  - 添加 MODE_SELECT 模式
  - 实现点击检测函数判断是否点中图形（点到线段距离、点在多边形内等）
  - 在 OnLButtonDown 中处理图形选择
  - 实现高亮显示选中图形（虚线边框）
  - 添加 RenderAll 方法重绘所有已保存的图形
  - _需求: 2.1, 2.2, 2.3, 2.4, 2.5_

- [x] 5. 实现图形变换功能（平移、缩放、旋转）
  - 添加变换相关的辅助函数（计算图形中心、应用变换矩阵）
  - 实现平移：记录起点和终点，计算偏移量，更新选中图形的所有顶点
  - 实现缩放：以图形中心为基准，根据鼠标距离计算缩放比例
  - 实现旋转：用户点击确定旋转中心，根据鼠标移动计算旋转角度
  - 在 OnLButtonDown/OnMouseMove/OnRButtonDown 中处理变换交互
  - _需求: 3.1, 3.2, 3.3, 3.4, 3.5, 4.1, 4.2, 4.3, 4.4, 4.5, 4.6, 5.1, 5.2, 5.3, 5.4, 5.5_

- [x] 6. 实现裁剪窗口定义
  - 添加裁剪窗口的矩形变量
  - 在裁剪模式下，OnLButtonDown 记录起点，拖动显示虚线矩形预览
  - 释放鼠标后确定裁剪窗口并执行裁剪
  - _需求: 6.1, 6.2, 6.3, 6.4, 6.5, 6.6_

- [x] 7. 实现 Cohen-Sutherland 直线裁剪算法
  - 实现区域编码函数 ComputeOutCode
  - 实现 ClipLineCohenSutherland 函数裁剪单条直线
  - 遍历所有直线图形应用裁剪，更新或删除图形
  - 保持其他类型图形不变
  - _需求: 7.1, 7.2, 7.3, 7.4, 7.5, 7.6, 7.7_

- [x] 8. 实现中点分割直线裁剪算法
  - 实现判断点在窗口内的函数
  - 实现递归中点分割函数 ClipLineMidpoint
  - 遍历所有直线图形应用裁剪
  - 添加递归深度限制
  - _需求: 8.1, 8.2, 8.3, 8.4, 8.5, 8.6, 8.7_

- [ ] 9. 实现 Sutherland-Hodgman 多边形裁剪算法
  - 实现判断点在裁剪边内侧的函数
  - 实现计算交点的函数
  - 实现对单条边裁剪的函数 ClipAgainstEdge
  - 实现完整的 Sutherland-Hodgman 裁剪，依次对四条边裁剪
  - 遍历所有多边形应用裁剪，更新图形列表
  - _需求: 9.1, 9.2, 9.3, 9.4, 9.5, 9.6, 9.7, 9.8_

- [ ] 10. 实现 Weiler-Atherton 多边形裁剪算法
  - 实现计算多边形与窗口交点的函数
  - 实现标记交点进入/离开属性的函数
  - 实现追踪边界生成结果多边形的函数
  - 遍历所有多边形应用裁剪
  - 处理凹多边形情况
  - _需求: 10.1, 10.2, 10.3, 10.4, 10.5, 10.6, 10.7, 10.8_

- [ ] 11. 完善交互和视觉反馈
  - 实现实时预览（变换和裁剪窗口）
  - 添加简单的错误提示（MessageBox）
  - 在标题栏显示当前模式
  - 优化重绘逻辑避免闪烁
  - _需求: 11.4, 11.5, 11.6, 11.7_
