# 3D坐标轴和网格功能说明

## 概述

为了帮助用户更好地理解3D场景中的方向和位置，我们添加了坐标轴、网格和光源可视化功能。

## 坐标系统说明

### 坐标轴颜色编码
- **X轴（红色）**：指向右方（正X方向）
- **Y轴（绿色）**：指向上方（正Y方向）  
- **Z轴（蓝色）**：指向前方（正Z方向）

### 坐标轴特征
- 每个轴长度为3个单位
- 轴末端有明显的箭头指示方向
- 轴末端有简单的字母标识（X、Y、Z）
- 原点位置有白色小球标识

## 网格系统

### 网格特点
- 网格位于XZ平面（Y=0）上
- 默认大小：10×10格，每格间距1个单位
- 以原点为中心，向四个方向延伸

### 网格线条类型
1. **主轴线**（X=0和Z=0）：较粗的灰色线条
2. **5格线**（每5个单位）：中等粗细的线条
3. **普通网格线**：较细的浅灰色线条

### 刻度标识
- 在X轴和Z轴上每5个单位有刻度标识
- 刻度包含水平和垂直的小标识线
- 帮助用户快速读取坐标值

## 光源可视化

### 光源图标
- 在光源位置显示太阳形状的图标
- 中心是一个亮点
- 周围有8个方向的射线
- 颜色与光源颜色一致

### 光源信息
- 光源位置可通过"3D控制"→"光照设置"菜单调整
- 默认光源位置：(5, 5, 5)
- 光源图标会实时跟随光源位置变化

## 菜单控制

通过"3D控制"菜单可以控制各种可视化元素的显示：

- **显示坐标轴**：开启/关闭坐标轴显示
- **显示网格**：开启/关闭网格显示  
- **显示光源**：开启/关闭光源可视化

## 使用建议

### 初学者
1. 建议同时开启坐标轴、网格和光源显示
2. 通过观察坐标轴颜色快速确定方向
3. 利用网格判断物体的大小和位置关系

### 进阶用户
1. 可以根据需要选择性显示辅助元素
2. 在制作演示时可以关闭辅助元素获得更清洁的画面
3. 调整光源位置时观察光源图标的移动

## 坐标读取方法

### 使用网格读取坐标
1. 找到物体在网格上的投影位置
2. 数格子确定X和Z坐标（每格1个单位）
3. 观察物体相对于网格平面的高度确定Y坐标

### 使用坐标轴参考
1. 红色X轴：正值向右，负值向左
2. 绿色Y轴：正值向上，负值向下
3. 蓝色Z轴：正值向前（屏幕外），负值向后（屏幕内）

## 常见问题

### Q: 为什么看不到坐标轴？
A: 检查"3D控制"菜单中"显示坐标轴"是否已勾选。

### Q: 网格线条太密集怎么办？
A: 可以通过"显示网格"菜单项关闭网格显示，或者调整摄像机距离。

### Q: 光源位置不明显怎么办？
A: 确保"显示光源"已开启，并且光源不在摄像机视野外。可以通过光照设置调整光源位置。

### Q: 如何快速定位到原点？
A: 寻找白色小球标识，那里就是坐标原点(0,0,0)。

### Q: 光源可视化位置与实际光照效果不一致？
A: 这个问题已经修复。现在光源位置在OpenGL中是在世界坐标系中设置的，不会受摄像机变换影响，因此光源可视化位置与实际光照效果完全一致。

## 技术说明

### 光源位置修复
之前的版本中，光源位置是在应用视图矩阵之后设置的，这导致光源位置会受到摄像机变换的影响，造成光源可视化位置与实际光照效果不一致的问题。

现在的修复：
1. 光源位置在应用视图矩阵**之前**设置到OpenGL中
2. 这样光源位置就是在世界坐标系中，不受摄像机变换影响
3. 光源可视化也是在世界坐标系中绘制，因此两者完全一致

## 技术实现

### 渲染顺序
1. 首先渲染3D物体（受光照影响）
2. 然后渲染辅助元素（不受光照影响）
   - 坐标轴
   - 网格
   - 光源可视化

### 性能考虑
- 辅助元素使用简单的线条和点绘制，性能开销很小
- 可以根据需要选择性关闭不需要的辅助元素
- 网格大小固定，不会随场景复杂度增加而影响性能